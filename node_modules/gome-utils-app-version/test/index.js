/* istanbul ignore next */
import {navigator} from 'gome-utils-bom'
import version from '../index.js'
const expect = chai.expect

describe('当环境是国美app/Android', () => {
    let stub
    before(function() {
        stub = sinon.stub(navigator, 'getUserAgent')
        stub.callsFake(function(){
            return 'Mozilla/5.0 (Linux; Android 5.1.1; SM-N9100 Build/LMY47X; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/43.0.2357.121 Mobile Safari/537.36 /gomeplus/103/355848061160704/Plus/5.1.1/WIFI/1440*2560/gome/'
        })
    })
    after(function() {
        stub.restore()
    })
    it('应该为Number', () => {
        expect(version()).to.be.a('number')
    })
    it('版本为103', () => {
        expect(version()).to.equal(103)
    })
})

describe('当环境是国美app/iOS', () => {
    let stub
    before(function() {
        stub = sinon.stub(navigator, 'getUserAgent')
        stub.callsFake(function(){
            return 'Mozilla/5.0 (iPhone; CPU iPhone OS 10.3.1 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Mobile/11B508/gomeplus/iphone/99/7aa6a0fa-c729-4899-9b15-8d96b5909458/10.3.1/WIFI/320*568/gome/8962CE878A934E86-B61A-C126DE9BB9A8'
        })            
    })
    after(function() {
        stub.restore()
    })
    it('应该为Number', () => {
        expect(version()).to.be.a('number')
    })
    it('版本为99', () => {
        expect(version()).to.equal(99)
    })
})


describe('当环境是普通浏览器', () => {
    it('应该为Number', () => {
        expect(version()).to.be.a('number')
    })
    it('版本为-1', () => {
        expect(version()).to.equal(-1)
    })
})