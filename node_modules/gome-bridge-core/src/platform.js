/*
 * @Author: liuxiaocong 
 * @Date: 2017-08-04 14:23:54 
 * @Last Modified by: liuxiaocong
 * @Last Modified time: 2017-08-15 17:25:29
 */
// import cordova from './cordova'
// import channel from './channel'
// import exec from './exec'
var system = '';
if(window.navigator.userAgent.match(/android/i)){
    system = 'android';
}else if(window.navigator.userAgent.match(/iPhone|iPad/i)){
    system = 'ios';
}
let platform = {
    id: system,
    bootstrap: function(){
        var APP_PLUGIN_NAME = "FOO"
        var cordova = require('./cordova')
        var channel =  require('./channel')
        var exec = require( './exec')
        if(system == 'android'){
            exec.init();
            channel.onCordovaReady.subscribe(function() {
            exec(onMessageFromNative, null, APP_PLUGIN_NAME, 'messageChannel', []);
            exec(null, null, APP_PLUGIN_NAME, "show", []);
        });
        }else{
            channel.onNativeReady.fire();
        }
    }
}
function onMessageFromNative(msg) {
    var cordova = require('./cordova');
    var action = msg.action;

    switch (action)
    {
        // Button events
        case 'backbutton':
        case 'menubutton':
        case 'searchbutton':
        // App life cycle events
        case 'pause':
        case 'resume':
        // Volume events
        case 'volumedownbutton':
        case 'volumeupbutton':
            cordova.fireDocumentEvent(action);
            break;
        default:
            throw new Error('Unknown event action ' + action);
    }
}
module.exports = platform
// export { platform }